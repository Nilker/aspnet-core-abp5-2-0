app.modals.LookupModal=function(){function e(){a.ajax.reload()}var t,a,o,n,l={serviceMethod:null,title:app.localize("SelectAnItem"),loadOnStartup:!0,showFilter:!0,filterText:"",pageSize:app.consts.grid.defaultPageSize,canSelect:function(e){return!0}};this.init=function(i){t=i,l=$.extend(l,t.getOptions().lookupOptions),o=t.getModal().find(".lookup-modal-table"),a=o.DataTable({paging:!0,serverSide:!0,processing:!0,lengthChange:!1,pageLength:l.pageSize,deferLoading:l.loadOnStartup?null:0,listAction:{ajaxFunction:l.serviceMethod,inputFilter:function(){return $.extend({filter:n.val()},t.getArgs().extraFilters)}},columnDefs:[{targets:0,data:null,orderable:!1,defaultContent:"",className:"text-center",rowAction:{element:$("<button/>").addClass("btn btn-metal m-btn m-btn--icon m-btn--icon-only").attr("title",app.localize("Select")).append($("<i/>").addClass("la la-chevron-circle-right")).click(function(){!function(e){var a=l.canSelect(e);if(a)!0===a?(t.setResult(e),t.close()):a.then(function(a){a&&(t.setResult(e),t.close())})}($(this).data())})}},{targets:1,data:"name"}]}),t.getModal().find(".lookup-filter-button").click(function(t){t.preventDefault(),e()}),t.getModal().find(".modal-body").keydown(function(t){13===t.which&&(t.preventDefault(),e())}),(n=t.getModal().find(".lookup-filter-text")).val(l.filterText)}},app.modals.LookupModal.create=function(e){return new app.ModalManager({viewUrl:abp.appPath+"AppAreaName/Common/LookupModal",scriptUrl:abp.appPath+"view-resources/Areas/AppAreaName/Views/Common/Modals/_LookupModal.js",modalClass:"LookupModal",lookupOptions:e})};